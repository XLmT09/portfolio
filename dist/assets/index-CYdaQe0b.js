(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function i(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=i(n);fetch(n.href,o)}})();function x({rimHex:e=35071,facingHex:t=0}={}){const i={color1:{value:new THREE.Color(e)},color2:{value:new THREE.Color(t)},fresnelBias:{value:.2},fresnelScale:{value:1.5},fresnelPower:{value:4}},r=`
    uniform float fresnelBias;
    uniform float fresnelScale;
    uniform float fresnelPower;
    
    varying float vReflectionFactor;
    
    void main() {
      vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
      vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
    
      vec3 worldNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );
    
      vec3 I = worldPosition.xyz - cameraPosition;
    
      vReflectionFactor = fresnelBias + fresnelScale * pow( 1.0 + dot( normalize( I ), worldNormal ), fresnelPower );
    
      gl_Position = projectionMatrix * mvPosition;
    }
    `,n=`
    uniform vec3 color1;
    uniform vec3 color2;
    
    varying float vReflectionFactor;
    
    void main() {
      float f = clamp( vReflectionFactor, 0.0, 1.0 );
      gl_FragColor = vec4(mix(color2, color1, vec3(f)), f);
    }
    `;return new THREE.ShaderMaterial({uniforms:i,vertexShader:r,fragmentShader:n,transparent:!0,blending:THREE.AdditiveBlending})}const h=new THREE.TextureLoader;function G(e){const t=new THREE.Group;t.rotation.z=-20.4*Math.PI/180;const i=h.load("src/images/planets/earth.jpg"),r=new THREE.IcosahedronGeometry(1,15),n=new THREE.MeshStandardMaterial({map:i}),o=new THREE.Mesh(r,n);t.add(o),t.position.set(...e);const l=h.load("src/images/planets/earth_light.jpg"),s=new THREE.MeshBasicMaterial({map:l,blending:THREE.AdditiveBlending}),a=new THREE.Mesh(r,s);t.add(a);const c=h.load("src/images/planets/earth_clouds.jpg"),E=new THREE.MeshStandardMaterial({map:c,transparent:!0,opacity:.4,blending:THREE.AdditiveBlending}),u=new THREE.Mesh(r,E);u.scale.setScalar(1.003),t.add(u);const B=x(),g=new THREE.Mesh(r,B);return g.scale.setScalar(1.01),t.add(g),{earthGroup:t,earthMesh:o,lightsMesh:a,cloudsMesh:u,glowMesh:g}}function v({img:e="",size:t=1,position:i=[],glow:r}){const n=new THREE.IcosahedronGeometry(1,12),o=new THREE.Group;o.position.set(...i);const l=h.load(`src/images/planets/${e}`),s=new THREE.MeshStandardMaterial({map:l}),a=new THREE.Mesh(n,s);a.scale.setScalar(t),e=="saturn.jpg"?o.rotation.z=-6*Math.PI/180:o.rotation.z=-20.4*Math.PI/180;const c=x({rimHex:r,facingHex:0}),E=new THREE.Mesh(n,c);return E.scale.setScalar(1.01),a.add(E),o.add(a),o}function I({img:e="",position:t=[]}){const i=h.load(`src/images/planets/${e}`),r=9,n=12,o=128,l=new THREE.RingGeometry(r,n,o),s=new THREE.MeshBasicMaterial({map:i,color:16777215,side:THREE.DoubleSide}),a=new THREE.Mesh(l,s);return a.rotation.x=Math.PI/2,a.rotation.y=-Math.PI/40,a.rotation.z=0,a.position.set(...t),a}function C(){const e=new THREE.BufferGeometry,t=new THREE.TextureLoader().load("src/images/stars/diamond.png"),i=new THREE.PointsMaterial({size:.8,map:t,transparent:!0,depthWrite:!1,blending:THREE.AdditiveBlending}),r=[];for(let o=0;o<2e4;o++)r.push((Math.random()-.5)*1e3,(Math.random()-.5)*1e3,(Math.random()-.5)*1e3);return e.setAttribute("position",new THREE.Float32BufferAttribute(r,3)),new THREE.Points(e,i)}const A=200;function j(e,t,i,r,n){const o=new THREE.CylinderGeometry(.04,.04,.5,12);o.rotateX(Math.PI/2);const l=new THREE.MeshBasicMaterial({color:3274791}),s=new THREE.Mesh(o,l),a=new THREE.CylinderGeometry(.06,.06,.5,12);a.rotateX(Math.PI/2);const c=new THREE.MeshBasicMaterial({color:282624,transparent:!0,opacity:1,blending:THREE.AdditiveBlending}),E=new THREE.Mesh(a,c);s.add(E),s.position.copy(e.position),t.setFromCamera(i,e);const u=t.ray.direction.clone();s.quaternion.setFromUnitVectors(new THREE.Vector3(0,.1,-.005),u),s.userData.velocity=u.multiplyScalar(.5),s.position.add(new THREE.Vector3(0,0,-1).applyQuaternion(e.quaternion)),r.add(s),n.push(s)}function O(e,t){for(let i=e.length-1;i>=0;i--)e[i].position.add(e[i].userData.velocity),e[i].position.length()>A&&(t.remove(e[i]),e.splice(i,1))}function U(e){function t(){const i=window.scrollY,r=document.body.scrollHeight-window.innerHeight,n=i/r;e.position.z=5+n*100}window.addEventListener("scroll",t)}function W(e){window.addEventListener("mousemove",t=>{e.x=t.clientX/window.innerWidth*2-1,e.y=-(t.clientY/window.innerHeight)*2+1})}function D(e,t,i){window.addEventListener("resize",()=>{e.setSize(window.innerWidth,window.innerHeight),t.setSize(window.innerWidth,window.innerHeight),i.aspect=window.innerWidth/window.innerHeight,i.updateProjectionMatrix()})}function z(e){return!!e.target.closest("#section3 .box-container")}function N(e,t,i){let r=0,n=0,o=!1;const l=10;window.addEventListener("pointerdown",s=>{z(s)||(s.pointerType==="mouse"?e():(r=s.clientX,n=s.clientY,o=!1))}),window.addEventListener("pointermove",s=>{if(s.pointerType!=="touch"||z(s))return;const a=Math.abs(s.clientX-r),c=Math.abs(s.clientY-n);(a>l||c>l)&&(o=!0)}),window.addEventListener("pointerup",s=>{if(s.pointerType==="mouse"){t();return}o||i()})}function V(e,t,i,r,n,o,l){let s=!1,a=null;function c(){s||(s=!0,e(i,r,n,o,l),a=setInterval(()=>{e(i,r,n,o,l)},t))}function E(){s=!1,clearInterval(a)}function u(){e(i,r,n,o,l)}N(c,E,u)}const X=10/2,d=.01;function _(e,t,i,r,n){if(e.position.z>=20&&e.position.z<=33){const o=Math.sin(e.position.z*.1)*.2;t.position.z=THREE.MathUtils.lerp(t.position.z,e.position.z-2.8,d),t.position.x=THREE.MathUtils.lerp(t.position.x,-1-o,d)}else t.position.z=THREE.MathUtils.lerp(t.position.z,26.5,d);e.position.z>=40&&e.position.z<=60?i.position.z=THREE.MathUtils.lerp(i.position.z,e.position.z-X-18,d):i.position.z=THREE.MathUtils.lerp(i.position.z,30,d),e.position.z>=75&&e.position.z<=100?(r.position.z=THREE.MathUtils.lerp(r.position.z,e.position.z-16,d),n.position.z=THREE.MathUtils.lerp(n.position.z,e.position.z-16,d)):(r.position.z=THREE.MathUtils.lerp(r.position.z,90,d),n.position.z=THREE.MathUtils.lerp(n.position.z,90,d))}const Y=window.innerWidth,q=window.innerHeight,$=75,K=Y/q,Q=.1,k=1e3,p=new THREE.Scene,S=new THREE.Scene,f=new THREE.PerspectiveCamera($,K,Q,k),J=document.getElementById("webgl-canvas"),w=new THREE.WebGLRenderer({canvas:J,alpha:!0});w.setSize(window.innerWidth,window.innerHeight);w.setPixelRatio(window.devicePixelRatio);w.setClearColor(0,0);w.clear();const y=new THREE.WebGLRenderer({canvas:backgroundCanvas});y.setSize(window.innerWidth,window.innerHeight);const P=[],L=new THREE.Vector2,Z=new THREE.Raycaster;f.position.z=5;const R=C();S.add(R);const M=v({size:1.4,img:"mars.jpg",position:[-1,0,26.5],glow:13204573});p.add(M);const m=v({size:10,img:"jupiter.jpg",position:[0,0,34],glow:16747520});p.add(m);const H=v({size:4,img:"saturn.jpg",position:[-.5,-1,90],glow:13742716});p.add(H);const T=I({img:"saturnRings.jpg",position:[-.5,-.4,90]});p.add(T);const{earthGroup:ee,earthMesh:te,lightsMesh:ne,cloudsMesh:oe,glowMesh:ie}=G([1,0,3.5]);p.add(ee);const b=new THREE.DirectionalLight(16777215,1);b.position.set(-2,.5,1.5);p.add(b);U(f);V(j,100,f,Z,L,p,P);W(L);D(y,w,f);function F(){requestAnimationFrame(F),R.rotation.x+=3e-5,R.rotation.y+=3e-5,te.rotation.y+=2e-4,ne.rotation.y+=2e-4,ie.rotation.y+=2e-4,oe.rotation.y+=23e-5,m.rotation.y+=2e-4,H.rotation.y+=2e-4,T.rotation.z-=5e-5,M.rotation.y+=2e-4,_(f,M,m,H,T),O(P,p),y.render(S,f),w.render(p,f)}F();
