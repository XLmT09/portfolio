(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function o(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=o(n);fetch(n.href,i)}})();function x({rimHex:e=35071,facingHex:t=0}={}){const o={color1:{value:new THREE.Color(e)},color2:{value:new THREE.Color(t)},fresnelBias:{value:.2},fresnelScale:{value:1.5},fresnelPower:{value:4}},r=`
    uniform float fresnelBias;
    uniform float fresnelScale;
    uniform float fresnelPower;
    
    varying float vReflectionFactor;
    
    void main() {
      vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
      vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
    
      vec3 worldNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );
    
      vec3 I = worldPosition.xyz - cameraPosition;
    
      vReflectionFactor = fresnelBias + fresnelScale * pow( 1.0 + dot( normalize( I ), worldNormal ), fresnelPower );
    
      gl_Position = projectionMatrix * mvPosition;
    }
    `,n=`
    uniform vec3 color1;
    uniform vec3 color2;
    
    varying float vReflectionFactor;
    
    void main() {
      float f = clamp( vReflectionFactor, 0.0, 1.0 );
      gl_FragColor = vec4(mix(color2, color1, vec3(f)), f);
    }
    `;return new THREE.ShaderMaterial({uniforms:o,vertexShader:r,fragmentShader:n,transparent:!0,blending:THREE.AdditiveBlending})}const g=new THREE.TextureLoader;function G(e){const t=new THREE.Group;t.rotation.z=-20.4*Math.PI/180;const o=g.load("images/planets/earth.jpg"),r=new THREE.IcosahedronGeometry(1,15),n=new THREE.MeshStandardMaterial({map:o}),i=new THREE.Mesh(r,n);t.add(i),t.position.set(...e);const l=g.load("images/planets/earth_light.jpg"),a=new THREE.MeshBasicMaterial({map:l,blending:THREE.AdditiveBlending}),s=new THREE.Mesh(r,a);t.add(s);const u=g.load("images/planets/earth_clouds.jpg"),p=new THREE.MeshStandardMaterial({map:u,transparent:!0,opacity:.4,blending:THREE.AdditiveBlending}),E=new THREE.Mesh(r,p);E.scale.setScalar(1.003),t.add(E);const h=x(),R=new THREE.Mesh(r,h);return R.scale.setScalar(1.01),t.add(R),{earthGroup:t,earthMesh:i,lightsMesh:s,cloudsMesh:E,glowMesh:R}}function y({img:e="",size:t=1,position:o=[],glow:r}){const n=new THREE.IcosahedronGeometry(1,12),i=new THREE.Group;i.position.set(...o);const l=g.load(`images/planets/${e}`),a=new THREE.MeshStandardMaterial({map:l}),s=new THREE.Mesh(n,a);s.scale.setScalar(t),e=="saturn.jpg"?i.rotation.z=-6*Math.PI/180:i.rotation.z=-20.4*Math.PI/180;const u=x({rimHex:r,facingHex:0}),p=new THREE.Mesh(n,u);return p.scale.setScalar(1.01),s.add(p),i.add(s),i}function I({img:e="",position:t=[]}){const o=g.load(`images/planets/${e}`),r=9,n=12,i=128,l=new THREE.RingGeometry(r,n,i),a=new THREE.MeshBasicMaterial({map:o,color:16777215,side:THREE.DoubleSide}),s=new THREE.Mesh(l,a);return s.rotation.x=Math.PI/2,s.rotation.y=-Math.PI/40,s.rotation.z=0,s.position.set(...t),s}function B(){const e=new THREE.BufferGeometry,t=new THREE.TextureLoader().load("images/stars/diamond.png"),o=new THREE.PointsMaterial({size:.8,map:t,transparent:!0,depthWrite:!1,blending:THREE.AdditiveBlending}),r=[];for(let i=0;i<2e4;i++)r.push((Math.random()-.5)*1e3,(Math.random()-.5)*1e3,(Math.random()-.5)*1e3);return e.setAttribute("position",new THREE.Float32BufferAttribute(r,3)),new THREE.Points(e,o)}const C=200;function A(e,t,o,r,n){const i=new THREE.CylinderGeometry(.04,.04,.5,12);i.rotateX(Math.PI/2);const l=new THREE.MeshBasicMaterial({color:3274791}),a=new THREE.Mesh(i,l),s=new THREE.CylinderGeometry(.06,.06,.5,12);s.rotateX(Math.PI/2);const u=new THREE.MeshBasicMaterial({color:282624,transparent:!0,opacity:1,blending:THREE.AdditiveBlending}),p=new THREE.Mesh(s,u);a.add(p),a.position.copy(e.position),t.setFromCamera(o,e);const E=t.ray.direction.clone();a.quaternion.setFromUnitVectors(new THREE.Vector3(0,.1,-.005),E),a.userData.velocity=E.multiplyScalar(.5),a.position.add(new THREE.Vector3(0,0,-1).applyQuaternion(e.quaternion)),r.add(a),n.push(a)}function j(e,t){for(let o=e.length-1;o>=0;o--)e[o].position.add(e[o].userData.velocity),e[o].position.length()>C&&(t.remove(e[o]),e.splice(o,1))}function U(e){function t(){const o=window.scrollY,r=document.body.scrollHeight-window.innerHeight,n=o/r;e.position.z=5+n*100}window.addEventListener("scroll",t)}function W(e){window.addEventListener("mousemove",t=>{e.x=t.clientX/window.innerWidth*2-1,e.y=-(t.clientY/window.innerHeight)*2+1})}function D(e,t,o){window.addEventListener("resize",()=>{e.setSize(window.innerWidth,window.innerHeight),t.setSize(window.innerWidth,window.innerHeight),o.aspect=window.innerWidth/window.innerHeight,o.updateProjectionMatrix()})}function N(e,t,o,r,n,i,l){let a=!1,s=null;function u(){a||(a=!0,e(o,r,n,i,l),s=setInterval(()=>{e(o,r,n,i,l)},t))}function p(){a=!1,clearInterval(s)}function E(){e(o,r,n,i,l)}window.addEventListener("pointerdown",h=>{h.pointerType==="mouse"?u():E()}),window.addEventListener("pointerup",h=>{h.pointerType==="mouse"&&p()})}const O=10/2,c=.01;function V(e,t,o,r,n){if(e.position.z>=20&&e.position.z<=33){const i=Math.sin(e.position.z*.1)*.2;t.position.z=THREE.MathUtils.lerp(t.position.z,e.position.z-2.8,c),t.position.x=THREE.MathUtils.lerp(t.position.x,-1-i,c)}else t.position.z=THREE.MathUtils.lerp(t.position.z,26.5,c);e.position.z>=40&&e.position.z<=60?o.position.z=THREE.MathUtils.lerp(o.position.z,e.position.z-O-18,c):o.position.z=THREE.MathUtils.lerp(o.position.z,30,c),e.position.z>=75&&e.position.z<=100?(r.position.z=THREE.MathUtils.lerp(r.position.z,e.position.z-16,c),n.position.z=THREE.MathUtils.lerp(n.position.z,e.position.z-16,c)):(r.position.z=THREE.MathUtils.lerp(r.position.z,90,c),n.position.z=THREE.MathUtils.lerp(n.position.z,90,c))}const _=window.innerWidth,q=window.innerHeight,X=75,Y=_/q,$=.1,K=1e3,d=new THREE.Scene,S=new THREE.Scene,f=new THREE.PerspectiveCamera(X,Y,$,K),Q=document.getElementById("webgl-canvas"),w=new THREE.WebGLRenderer({canvas:Q,alpha:!0});w.setSize(window.innerWidth,window.innerHeight);w.setPixelRatio(window.devicePixelRatio);w.setClearColor(0,0);w.clear();const z=new THREE.WebGLRenderer({canvas:backgroundCanvas});z.setSize(window.innerWidth,window.innerHeight);const P=[],L=new THREE.Vector2,J=new THREE.Raycaster;f.position.z=5;const m=B();S.add(m);const M=y({size:1.4,img:"mars.jpg",position:[-1,0,26.5],glow:13204573});d.add(M);const H=y({size:10,img:"jupiter.jpg",position:[0,0,34],glow:16747520});d.add(H);const T=y({size:4,img:"saturn.jpg",position:[-.5,-1,90],glow:13742716});d.add(T);const v=I({img:"saturnRings.jpg",position:[-.5,-.4,90]});d.add(v);const{earthGroup:Z,earthMesh:k,lightsMesh:ee,cloudsMesh:te,glowMesh:ne}=G([1,0,3.5]);d.add(Z);const b=new THREE.DirectionalLight(16777215,1);b.position.set(-2,.5,1.5);d.add(b);U(f);N(A,100,f,J,L,d,P);W(L);D(z,w,f);function F(){requestAnimationFrame(F),m.rotation.x+=3e-5,m.rotation.y+=3e-5,k.rotation.y+=2e-4,ee.rotation.y+=2e-4,ne.rotation.y+=2e-4,te.rotation.y+=23e-5,H.rotation.y+=2e-4,T.rotation.y+=2e-4,v.rotation.z-=5e-5,M.rotation.y+=2e-4,V(f,M,H,T,v),j(P,d),z.render(S,f),w.render(d,f)}F();
